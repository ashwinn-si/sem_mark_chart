<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Excel â†’ Semester Line Chart (Fixed)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app">
    <!-- Top Bar -->
    <header class="top-bar">
      <div class="brand-section">
        <div class="logo-icon">ğŸ“Š</div>
        <div class="brand-text">
          <h1>Grade Analyzer</h1>
          <span class="tagline">Semester Performance Tracker</span>
        </div>
      </div>
      <div class="actions-section">
        <div id="infoText" class="file-status">No file loaded</div>
        <div id="fileDrop" class="upload-btn">
          <input id="fileInput" type="file" accept=".xlsx,.xls,.csv" />
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <span>Upload</span>
        </div>
        <button id="themeToggle" class="theme-switch" title="Toggle Theme">ğŸŒ™</button>
      </div>
    </header>

    <!-- Chart Section -->
    <section class="chart-section">
      <div class="chart-card">
        <div class="chart-header">
          <h2>Performance Chart</h2>
          <button id="downloadBtn" class="btn" disabled>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Download PNG
          </button>
        </div>
        <div class="canvas-wrap">
          <canvas id="chartCanvas" width="1000" height="500"></canvas>
        </div>
      </div>
    </section>

    <!-- Controls & Info -->
    <section class="sidebar-section">
      <div class="control-group">
        <h3>ğŸ” Search Student</h3>
        <input id="searchInput" type="text" placeholder="Enter student ID (e.g. M2)" />
      </div>

      <div class="control-group">
        <h3>âš™ï¸ Chart Options</h3>
        <label class="toggle-item">
          <input id="smoothToggle" type="checkbox" checked />
          <span>Smooth Lines</span>
        </label>
        <label class="toggle-item">
          <input id="pointsToggle" type="checkbox" checked />
          <span>Show Points</span>
        </label>
      </div>

      <div class="control-group">
        <h3>ğŸ¨ Color Palette</h3>
        <select id="paletteSelect"></select>
      </div>

      <div class="info-group">
        <h3>ğŸ“‹ Expected Format</h3>
        <pre class="format-example">    SEM1  SEM2  SEM3  SEM4
M1  517   510   432   456
M2  518   528   383   471
M3  519   510   429   492</pre>
      </div>

      <div class="info-group">
        <h3>ğŸ”’ Privacy Note</h3>
        <p class="privacy-text">All data processing happens locally in your browser. Nothing is uploaded to any server.</p>
      </div>
    </section>
  </div>

  <!-- Libraries: SheetJS to parse Excel, Chart.js to plot -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="index.js"></script>
</body>
</html>
